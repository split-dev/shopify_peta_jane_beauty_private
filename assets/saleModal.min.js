class SaleModal extends HTMLElement{constructor(){super(),this.settings={customerSubscibed:"true"===localStorage.getItem("isSubscribed")||"true"===this.dataset.isCustomerSubscribed,delay:1e3*parseFloat(this.dataset.delay),isOncePerSession:"true"===this.dataset.oncePerSession,isPrevSession:"true"===sessionStorage.getItem("subscriptionSession")},this.selectors={close:this.querySelectorAll("[data-modal-close]"),form:this.querySelector("form")},this.settings.customerSubscibed||this.settings.isOncePerSession&&this.settings.isPrevSession||(this.show=this.show.bind(this),this._bindEvents=this._bindEvents.bind(this),this._init())}_bindEvents(){this.selectors.close.forEach((s=>{s.addEventListener("click",(()=>{this.hide()}))})),this.selectors.form.addEventListener("submit",(()=>{this._subscribe()}))}_recordSession(){sessionStorage.setItem("subscriptionSession","true")}hide(){this.classList.remove("reveal"),this.settings.isOncePerSession&&this._recordSession()}show(){this.classList.add("reveal")}_subscribe(){localStorage.setItem("isSubscribed","true")}_init(){this.classList.remove("d-none"),this._bindEvents(),setTimeout((()=>{this.show()}),this.settings.delay)}}customElements.define("subscripton-modal",SubscriptionModal);