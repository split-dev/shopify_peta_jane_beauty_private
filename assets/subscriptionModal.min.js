class SubscriptionModal extends HTMLElement{constructor(){super(),this.id=this.dataset.sectionId,this.names={LOCAL_NAME:`${this.id}--isSubscribed`,SESSION_NAME:`${this.id}--subscriptionSession`},this.settings={customerSubscibed:"true"===localStorage.getItem(this.names.LOCAL_NAME)||"true"===this.dataset.isCustomerSubscribed,delay:1e3*parseFloat(this.dataset.delay),isOncePerSession:"true"===this.dataset.oncePerSession,isPrevSession:"true"===sessionStorage.getItem(this.names.SESSION_NAME)},this.selectors={close:this.querySelectorAll("[data-modal-close]"),form:this.querySelector("form")},this.settings.customerSubscibed||this.settings.isOncePerSession&&this.settings.isPrevSession||(this.show=this.show.bind(this),this._bindEvents=this._bindEvents.bind(this),this._init())}_bindEvents(){this.selectors.close&&this.selectors.close.forEach((s=>{s.addEventListener("click",(()=>{this.hide()}))})),this.selectors.form&&this.selectors.form.addEventListener("submit",(()=>{this._subscribe()}))}_recordSession(){sessionStorage.setItem(this.names.SESSION_NAME,"true")}hide(){this.classList.remove("reveal"),this.settings.isOncePerSession&&this._recordSession()}show(){this.classList.add("reveal")}_subscribe(){localStorage.setItem(this.names.LOCAL_NAME,"true")}_init(){this.classList.remove("d-none"),this._bindEvents(),setTimeout((()=>{this.show()}),this.settings.delay)}}customElements.define("subscripton-modal",SubscriptionModal);